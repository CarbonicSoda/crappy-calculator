(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();const v=4;var o=(t=>(t[t.Bracket=0]="Bracket",t[t.UnaryOperator=1]="UnaryOperator",t[t.BinaryOperator=2]="BinaryOperator",t[t.Numeral=3]="Numeral",t))(o||{}),f=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(f||{}),m=(t=>(t[t.Pos=0]="Pos",t[t.Neg=1]="Neg",t))(m||{}),u=(t=>(t[t.Add=0]="Add",t[t.Sub=1]="Sub",t[t.Mul=2]="Mul",t[t.Div=3]="Div",t[t.Pow=4]="Pow",t))(u||{});function w(t){const a=t.length,e=[];for(;t.length;){const n=a-t.length,r=N(t,e,n);if(!r)throw new SyntaxError(`Unknown symbol at index ${n}.`);t=t.slice(r.length)}return e}const O={[o.Bracket]:/[\(\)]/,[o.UnaryOperator]:/[\+\-]/,[o.BinaryOperator]:/[\+\-\*\/\^]/,[o.Numeral]:/\d+(?:\.\d+)?(?:[eE](?:[\+\-])?\d+)?/};function N(t,a,e){let n;for(let r=0;r<v;r++){const c=new RegExp(`^\\s*${O[r].source}\\s*`);if(n=t.match(c)?.[0],!n)continue;const i=n.trim();switch(r){case o.Bracket:{const l=i==="("?f.Left:f.Right;a.at(-1)?.type===o.Numeral&&l===f.Left&&a.push({type:o.BinaryOperator,value:u.Mul,index:e}),a.push({type:o.Bracket,value:l,index:e});break}case o.UnaryOperator:{const l=a.at(-1);if(l?.type===void 0||l?.type===o.Bracket&&l.value===f.Left||l?.type===o.UnaryOperator||l?.type===o.BinaryOperator){a.push({type:o.UnaryOperator,value:i==="-"?m.Neg:m.Pos,index:e});break}}case o.BinaryOperator:{a.push({type:o.BinaryOperator,value:{"+":u.Add,"-":u.Sub,"*":u.Mul,"/":u.Div,"^":u.Pow}[i],index:e});break}case o.Numeral:{a.push({type:o.Numeral,value:Number(i),index:e});break}}break}return n}function b(t){if(t.length===1){const r=t[0];if(r.type!==o.Numeral)throw new SyntaxError(`Invalid orphan token at index ${r.index}.`);return s({num:r})}const a={content:{}};let e=a,n=0;for(;n<t.length;){const r=t[n];switch(r.type){case o.Bracket:{const c=k(t,n),i=b(t.slice(n+1,c));if(n=c,!e.content.operator){e.content=(n+1===t.length?i:s({left:i})).content;break}if(e.content.operator.type===o.UnaryOperator){e.content.arg=i;break}e.content.right=i;break}case o.UnaryOperator:{const i=s({operator:r});if(!e.content.operator){e.content=i.content;break}e.content.operator.type===o.UnaryOperator?e.content.arg=i:e.content.right=i,e=i;break}case o.BinaryOperator:{const c=r;if(e.content.left&&!e.content.operator){e.content.operator=c;break}const i=c.value===u.Add||c.value===u.Sub,l=e.content.operator.type===o.UnaryOperator,h=s({left:structuredClone(i||l?e:e.content.right),operator:c});if(i||l){e.content=h.content;break}e.content.right=h,e=h;break}case o.Numeral:{const i=s({num:r});if(!e.content.operator){e.content=s({left:i}).content;break}e.content.operator.type===o.UnaryOperator?e.content.arg=i:e.content.right=i;break}}n++}return a}function k(t,a){let e=a,n=1;for(;e<t.length&&(e++,!(t[e].type===o.Bracket&&(t[e].value===f.Left?n++:n--,n===0))););if(n!==0)throw new SyntaxError(`No matching right bracket for left bracket at index ${a}`);if(e===a+1)throw new SyntaxError(`Empty brackets at index ${a}.`);return e}function s(t){return{content:t}}function d(t){if(t.content.num)return t.content.num.value;if(t.content.operator.type===o.UnaryOperator){const r=t.content,c=d(r.arg);return r.operator.value===m.Pos?c:-c}const a=t.content,e=d(a.left),n=d(a.right);switch(a.operator.value){case u.Add:return e+n;case u.Sub:return e-n;case u.Mul:return e*n;case u.Div:return e/n;case u.Pow:return e**n}}function y(t){return d(b(w(t)))}const p=document.getElementById("calc"),g=document.getElementById("res");g.textContent=String(y(p.getAttribute("placeholder")));p.oninput=()=>{if(p.value.length===0){g.textContent=String(y(p.getAttribute("placeholder")));return}try{g.textContent=String(y(p.value))}catch{g.textContent="Invalid Input"}};
