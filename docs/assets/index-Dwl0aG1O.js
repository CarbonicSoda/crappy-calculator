(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=e(r);fetch(r.href,c)}})();const v=4;var o=(t=>(t[t.Bracket=0]="Bracket",t[t.UnaryOperator=1]="UnaryOperator",t[t.BinaryOperator=2]="BinaryOperator",t[t.Numeral=3]="Numeral",t))(o||{}),p=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(p||{}),m=(t=>(t[t.Pos=0]="Pos",t[t.Neg=1]="Neg",t))(m||{}),u=(t=>(t[t.Add=0]="Add",t[t.Sub=1]="Sub",t[t.Mul=2]="Mul",t[t.Div=3]="Div",t[t.Pow=4]="Pow",t))(u||{});function w(t){const i=t.length,e=[];for(;t.length;){const n=i-t.length,r=O(t,e,n);if(!r)throw new SyntaxError(`Unknown symbol at index ${n}.`);t=t.slice(r.length)}return e}const k={[o.Bracket]:/[\(\)]/,[o.UnaryOperator]:/[\+\-]/,[o.BinaryOperator]:/[\+\-\*\/\^]/,[o.Numeral]:/\d+(?:\.\d+)?(?:[eE](?:[\+\-])?\d+)?/};function O(t,i,e){let n;for(let r=0;r<v;r++){const c=new RegExp(`^\\s*${k[r].source}\\s*`);if(n=t.match(c)?.[0],!n)continue;const a=n.trim();switch(r){case o.Bracket:{i.push({type:o.Bracket,value:a==="("?p.Left:p.Right,index:e});break}case o.UnaryOperator:{const l=i.at(-1);if(l?.type===void 0||l?.type===o.Bracket&&l.value===p.Left||l?.type===o.UnaryOperator||l?.type===o.BinaryOperator){i.push({type:o.UnaryOperator,value:a==="-"?m.Neg:m.Pos,index:e});break}}case o.BinaryOperator:{i.push({type:o.BinaryOperator,value:{"+":u.Add,"-":u.Sub,"*":u.Mul,"/":u.Div,"^":u.Pow}[a],index:e});break}case o.Numeral:{i.push({type:o.Numeral,value:Number(a),index:e});break}}break}return n}function b(t){if(t.length===1){const r=t[0];if(r.type!==o.Numeral)throw new SyntaxError(`Invalid orphan token at index ${r.index}.`);return s({num:r})}let i={content:{}},e=i,n=0;for(;n<t.length;){const r=t[n];switch(r.type){case o.Bracket:{const c=N(t,n),a=b(t.slice(n+1,c));if(n=c,!e.content.operator){e.content=n+1===t.length?a.content:s({left:a}).content;break}if(e.content.operator.type===o.UnaryOperator){e.content.arg=a;break}e.content.right=a;break}case o.UnaryOperator:{const a=s({operator:r});if(!e.content.operator){e.content=a.content;break}e.content.operator.type===o.UnaryOperator?e.content.arg=a:e.content.right=a,e=a;break}case o.BinaryOperator:{const c=r;if(e.content.left&&!e.content.operator){e.content.operator=c;break}const a=c.value===u.Add||c.value===u.Sub,l=e.content.operator.type===o.UnaryOperator,h=s({left:structuredClone(a||l?e:e.content.right),operator:c});if(a||l){e.content=h.content,e=h;break}e.content.right=h,e=h;break}case o.Numeral:{const a=s({num:r});if(!e.content.operator){e.content=s({left:a}).content;break}e.content.operator.type===o.UnaryOperator?e.content.arg=a:e.content.right=a;break}}n++}return i}function N(t,i){let e=i,n=1;for(;e<t.length&&(e++,!(t[e].type===o.Bracket&&(t[e].value===p.Left?n++:n--,n===0))););if(n!==0)throw new SyntaxError(`No matching right bracket for left bracket at index ${i}`);if(e===i+1)throw new SyntaxError(`Empty brackets at index ${i}.`);return e}function s(t){return{content:t}}function d(t){if(t.content.num)return t.content.num.value;if(t.content.operator.type===o.UnaryOperator){const r=t.content,c=d(r.arg);return r.operator.value===m.Pos?c:-c}const i=t.content,e=d(i.left),n=d(i.right);switch(i.operator.value){case u.Add:return e+n;case u.Sub:return e-n;case u.Mul:return e*n;case u.Div:return e/n;case u.Pow:return e**n}}function y(t){return d(b(w(t)))}const f=document.getElementById("calc"),g=document.getElementById("res");g.textContent=String(y(f.getAttribute("placeholder")));f.oninput=()=>{if(f.value.length===0){g.textContent=String(y(f.getAttribute("placeholder")));return}try{g.textContent=String(y(f.value))}catch{g.textContent="Invalid Input"}};
